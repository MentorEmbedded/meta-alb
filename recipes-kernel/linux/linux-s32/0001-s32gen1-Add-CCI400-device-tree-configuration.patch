From d9752c01a4e70c8658d969cef0798cf34a1f6007 Mon Sep 17 00:00:00 2001
From: Vicovan Ionut-Valentin <Ionut.Vicovan@nxp.com>
Date: Tue, 19 Mar 2019 13:15:37 +0000
Subject: [PATCH] s32gen1: Add CCI400 device tree configuration

Issue: ALB-3517
Signed-off-by: Vicovan Ionut-Valentin <Ionut.Vicovan@nxp.com>
---
 arch/arm64/boot/dts/freescale/s32-gen1.dtsi | 25 +++++++++++++++++++++++++
 1 file changed, 25 insertions(+)

diff --git a/arch/arm64/boot/dts/freescale/s32-gen1.dtsi b/arch/arm64/boot/dts/freescale/s32-gen1.dtsi
index 7bf3fdb..9604d6b 100644
--- a/arch/arm64/boot/dts/freescale/s32-gen1.dtsi
+++ b/arch/arm64/boot/dts/freescale/s32-gen1.dtsi
@@ -40,6 +40,7 @@
 		cpu0: cpu@0 {
 			device_type = "cpu";
 			compatible = "arm,armv8";
+			cci-control-port = <&cci_control1>;
 			reg = <0x0 0x0>;
 			enable-method = "spin-table";
 			cpu-release-addr = <0x0 0x8000fff8>;
@@ -47,6 +48,7 @@
 		cpu1: cpu@1 {
 			device_type = "cpu";
 			compatible = "arm,armv8";
+			cci-control-port = <&cci_control1>;
 			reg = <0x0 0x1>;
 			enable-method = "spin-table";
 			cpu-release-addr = <0x0 0x8000fff8>;
@@ -54,6 +56,7 @@
 		cpu2: cpu@100 {
 			device_type = "cpu";
 			compatible = "arm,armv8";
+			cci-control-port = <&cci_control0>;
 			reg = <0x0 0x100>;
 			enable-method = "spin-table";
 			cpu-release-addr = <0x0 0x8000fff8>;
@@ -61,6 +64,7 @@
 		cpu3: cpu@101 {
 			device_type = "cpu";
 			compatible = "arm,armv8";
+			cci-control-port = <&cci_control0>;
 			reg = <0x0 0x101>;
 			enable-method = "spin-table";
 			cpu-release-addr = <0x0 0x8000fff8>;
@@ -594,6 +598,27 @@
 		status = "disabled";
 	};
 
+	cci@44290000 {
+		compatible = "arm,cci-400";
+		#address-cells = <1>;
+		#size-cells = <1>;
+		reg = <0x0 0x44290000 0 0x1000>;
+		ranges = <0x0 0x0 0x44290000 0x10000>;
+
+		cci_control0: slave-if@4000 {
+			compatible = "arm,cci-400-ctrl-if";
+			interface-type = "ace";
+			reg = <0x4000 0x1000>;
+		};
+
+		cci_control1: slave-if@5000 {
+			compatible = "arm,cci-400-ctrl-if";
+			interface-type = "ace";
+			reg = <0x5000 0x1000>;
+		};
+	};
+
+
 	gic: interrupt-controller@50800000 {
 		compatible = "arm,gic-v3";
 		#interrupt-cells = <3>;
-- 
2.7.4

